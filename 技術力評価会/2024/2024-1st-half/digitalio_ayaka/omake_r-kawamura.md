# おまけ

一歩進んだ技術的解決ができそうな部分として、

**連携先へのポストバックの非同期化**

も手段として取れそうだなと考えました

われわれもMMP（Mobile Measurement Partner）への通知で同様のアーキテクチャを組んでいます

結局やることはGETリクエストを送ることなので、そこの非同期化を狙います

1. ナビの登録処理内ではURLを生成してkinesisないしsqsへ詰む
1. lambdaなどでそのデータを取得しGETリクエストを送る

これだけです

詰むところは、

* ユーザ登録（ここでは送信対象となったことをログを吐くだけ; ログの内容は考えてみましょう）
* URL生成（非同期でログを食って通知先のURLを生成して詰む）

と分けると更に堅牢性が高まり、再送性が増しますね

* メリット
    * ASP側の健康状態に左右されないようになる
    * ASP側に対して再送可能な状態ができる
    * 裏側で起きてるエラーがユーザに（ただちに）影響しない
* デメリット
    * 処理の一貫性がパッと見わからなくなる
    * 利用するAWSサービスのメトリクスを監視対象にする必要がある

あたりでしょうか
