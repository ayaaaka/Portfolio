# 技術力評価会　評価結果

* 被評価者: 株式会社DIGITALIO ポイントメディア事業本部 小林 彩花
* 評価者: Zucks アドプロダクト事業部 あさはら

[評価資料](./README.md)

## 総評

`毎日貯まるコンテンツ` の一つである「検索」サービスが終了することになり、代わりのサービスの一つ、 `アンケートラリー` を開発した。コンテンツをアンケートとした理由は、ユーザのデータを将来的に活用していきたいという思惑があったからだった。しかし、ユーザデータはたまるようになったが、未だデータ活用については何も決まってない。というような内容だった。

### 👍👍👍

雑に仕事をなげても、ちゃんと作って運用まで乗っけてしまうパワーがあって、さすがだと思った。
周りもしっかり頼って、コミュニケーションをとりながら仕事を進めているので、安定感がありそう。

- 仕様が何もない状態からちゃんとリリース・運用までもっていった
- 炎上気味だったのを挽回し、見事決まっている期日にちゃんと間に合わせた
- 継続的にユーザが参加してくれるように工夫している
- アンケート登録編集の管理画面部分をあとまわしにして工数削減したのはよかった
- チームを頼って、ペアプロ・レビューするところ
- 不安に思ったら相談するところ
    - アンケート内容を法務に確認するところとか
    - (すり合わせの時に、何を作るかで構想が膨らみすぎたときに、えらい人に泣きついて収拾したってきいた。その辺もアピールしてくれ！)

### 🤔🤔🤔

- データ活用周りは、今現在でも川ちゃんさんマターで何も決まらないし、身動きが取れない状況なのが気になっている
    - 川ちゃんさんは隣のサービスをいまやっているらしい。今やってるタスクが終わったら帰ってくる予定ではあるらしい
    - ユーザ情報の鮮度を新しくするのが目的だったのだし、目的達成できてるかは現在確認できるからしよう、って話をした

- 1番やりたかったことは、 `削除されるコンテンツの代わりとして新しく何かしらのコンテンツを毎日貯まるに入れたい` だったんだけど、2番目の `鮮度の高いユーザデータの収集が出来るシステムが欲しい` にフォーカスしてしまって、結果仕様が複雑になった気がしている
    - 2番目は、結局データ活用部分の仕様が固まらなくて、川ちゃんさんも(一時的に)プロジェクトから抜けたので、その時点でその機能は捨てるとかでもよかったかも
    - 捨てなくても、あとから作り直ししやすくする程度でも

### その他

- 評価会中、アンケートのデータやその今後の取り扱いについての話を多くしてしまったけど、おそらく事業部としてやりたかったことは、 `毎日貯まるコンテンツ` の不採算サービスをなくしたかった、だろうと思う。議論もうすこしそこを深堀したほうがよかったのでは、と反省している。

    - 実は `毎日貯まるコンテンツ` は広告収入で運用されているという前提があったが、それを評価会の最後で認識した
        - アンケートも回答データを活用しなければ赤字なのでは、って思っていたがそいういうわけではないらしい
        - 検索サービスは赤字だったが、アンケートは黒字で、そこそこクリックも出る
            - 結局検索サービスは広告収入がよくなくて、アンケートがいいのはなんでなんだっけ？　みたいなところも訊いてみたかった。
- 仕様について、どういう案があって、最終的にどういう意思決定があって決まったのか、評価会中にもっときけばよかった
    - ディレクションについても評価がほしいといっていたが、過程がわからないと難しいなって思った
        - チーム外からもアイデアを募って〜みたいな話はあったけど……
    - 結局、具体的なことは最終決定の仕様しかわからなかった


## 評価者が被評価者の状況ならこう考える、こう動く

- 総評でもかいたけど、アンケートでユーザ情報蓄積分析するぞって部分は一回捨てて進めるかもしれない
    - 事業部的には黒字の `毎日貯まるコンテンツ` があればよかったはずなので？ 単純なアンケート取るだけ機能でも初期リリースはよかった？
    -  日程的にも厳しかったようだし、あとで詳しく仕様が固まったら、サーバサイド部分を作り直しておきかえ、みたいなフローでもよかったかもしれない
    - データ周りの仕様がどうなっても対応できるように考慮したらしいけど、DB設計とかも結構しっかりつくってるから、実際に対応するとき苦労しないんだっけ、は気になっている

## 能力向上に関するアドバイス

- データ収集・分析まわりは社の専門家たちにもっと頼っても良さそう
    - jewelさんがいっていた言葉の揺らぎとか、解析しやすいログとかのアドバイスがもらえるはず
    - アンケート部分も法務以外にも専用の知識がある人にきくみたいにしていいかもしれない
    - `#cto室_相談室` チャンネルで雑になげるとか
        - いまだとChat-GPT4さんとかも？
- 設計だけではなく、作るサービスそのものについても、もっと周りを巻き込んで相談する
     - 2 - 3人の構成だけど、全体像とか構想自体は他の人にも参加してもらったら、仕様ももっといいアイデアもらえるのでは
       - `毎日貯まるコンテンツ` はちょうど作ってるチームが隣にあったし、経験者も他にいそう
       - 当初仕様でもめてた〜あたりの文脈でいっている


## 細かいこと

### DB

- `INPUT_TYPE` や `ATTRIBUTE_KEY` が文字列で入るのが気になるって話をした
    - enum使ったり、`ENQUETE_RALLY_QUESTION_INPUT_TYPE` みたいな定義テーブルつくって外部キーにするやりかたもある
- 属性
    - jewelさんが、データ分析しやすいデータになっていたのか気にしていた。わかる。
      - `男` `男性` みたいな言葉の揺らぎとか
    - 今更ながらに、属性キーつけるなら `ENQUETE_RALLY_QUESTION_FIELD` の方じゃないかなって思った
        - 回答ベースにセグメント分けるなら、回答に紐付けないとむずかしくない？
- `ENQUETE_RALLY_QUESTION.DISPLAY_ORDER` 変えたくなった時とか新規質問挿入したいとき、運用しづらくない？
  - 後続のアンケート番号一個ずつずらす羽目になりそう
  - ID順に毎日回答するようになってるけど、○○を全員にとりあえず回答させたいってことができなさそう

### アンケートデータ

- ユーザの情報の鮮度を新しく、が目的だった
    - 「1日1問だと、全問回答してもらうのに時間がかかりすぎる」という意見がリリース後にでた
    - 他社だと、ユーザの情報を最新に更新したら抽選で◯◯プレゼント、とか、ポイント一律プレゼントとかってのを見たことがある。真に目的を達成するなら、そっちのほうがよかったのでは……。

- データの品質は担保されてなさそうだけどいいんだっけ？
    - 用途としては、データを活用してパーソナライズされたメール配信やアンケート配信等、ユーザに役立つものに利用予定とのこと。データが正しくないと、そのユーザに役立つ情報が届けられないだけ。なので、データとしての信頼性はある程度犠牲にして良いみたいな話だったが……
        - データ活用方法がまだちゃんときまってないので、ほんとうにそれでいいんだっけ、って気持ちが拭えない。
    - `無回答ならポイントは付与しない`
        - 毎日ポイントが欲しい人たちが答えるアンケートなので、答えたくない時に出鱈目な回答をしてしまわないだろうか
    - アンケート内容は専門家が検討しているわけではない
        - アンケートの設問は簡単そうにみえて、ちゃんと使えるデータを集めようとすると、結構考慮しないといけないことが多い。バイアス排除とかちゃんとできてるんだっけ？

### コード

- 質問データ取得APIで属性情報も返してて、ユーザにも見える状態だけど、問題ない？
    - https://github.com/voyagegroup/ecnavi/pull/15342/files#diff-35bbfd41345e7c1ebf4cd2623c8a2b6505a90c2541a75bda8ae598ada8da7ea5R35-R46
    - このへんレビューでつっこみとかなかったのかな
- 回答のAPIで500返したら不正扱いされない？
  - https://github.com/voyagegroup/ecnavi/pull/15502/files#diff-b298ee0260be1eeb37521e4be6ad3ad0e5b31e69f64f877a0dbabf632a727e2fR60


### 部署とかチームとか

- 仕様は何も決まっていないのに、締切だけが決まっているの、部署としてどうなんだって思ったけど、仕方なさそうだった
    - あやかさんに仕事が渡ってきた時には決まっていたらしい
    - 作るものが決まってから、検索サービス終了告知してもよかったんじゃないかなと思っている
    - 特に、ECナビだけで完結しているサービスなので、柔軟に対応できたのでは……
         - 垂れ流している赤字にもよるだろうけど、部署としてもうすこしどうにかできなかったのか、と思ってしまう
         - 最悪のばそうとすれば、できるがあまりやりたくないみたいな話だった
    - すり合わせの時に別途話を聞いて、仕方ない事情だなって思った
         - 社全体でユーザのグレードを整理しようとしていた
         - その流れで、ユーザの不利にならないように、不採算コンテンツをリプレイスしたかった
             - このタスクは大きいプロジェクトの一部だった
         - ユーザのグレードの更新が月初なので、締切をずらすとすれば一ヶ月先になってしまう
         - ユーザへの告知も早めに必要になる

- APIのPOSTするデータがFORM DATA
    - この辺、チームでのコードレビューで指摘あればよかったと思っている
    - JSONではなく、あえてFORM DATAを使うのはなぜなのか、チームで共通認識が持てていたら問題はなさそうだけど、実際はどうだったんだろうか。FORM DATAでもいいと思うけど、あえてそうしているなら理由が知りたい。
        - あやかさん曰く、データをPOSTするAPIは今回が初？
        -  想像するに、JSONだと新しくバリデータの仕組みなどが必要そうなので、今までのやり方に則っておいた方がコスパいいんだろうと思う……
    - 配列形式のデータをカンマで繋げて送って、受け取ってSplitして、みたいな処理が入っていたけど、FORM DATAは同じキーを複数指定したら、文字列として整形しなくても、(使用してるライブラリにもよるけど)配列として受け取れるよな、ってあとで思ってしまった
      - ex. `foo=1&foo=2`

