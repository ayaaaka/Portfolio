# 技術力評価会　評価結果

* 被評価者: VM 小林 彩花さん
* 評価者: Zucks 河村 綾祐 r-kawamura

[評価資料](./)

## 総評

Googleオフラインコンバージョントラッキングを利用し、「7日目アクティブユーザ」をコンバージョンとしてポイントログから対象を抽出してgoogle(Ads)にアップロードし、RPの（ECナビも）新規ユーザとなりうるユーザ獲得のために広告配信に活用しようというお話でした。

ビジネスサイドが持ってきた施策に対してやりたいことを、方針決定〜実装までやり切ったのは素晴らしいです。複数システムにまたがる機能なので、どちらに作るか、どうやってデータを引っ張ってくるかなど、複数案から選択理由まで事細かにissueにまとめられていて、非常に後から見る人にわかりやすい仕事の進め方をしているなと感心しました。

Google側の担当者異動でこの取り組みでインポートしたデータを利用した広告配信はまだ行われていないというのが残念でしたね...われわれも配信事業者なので効果のほどは非常に気になりポイントです。

- 外部から日付を渡して実行できるようにしている
- partialErrorも公式のエラーコードを見て処理している

のはgoodだと思いました。

## 評価者が被評価者の状況ならこう考える、こう動く

### バッチサーバからの脱却

わたしと三塚さんが口を揃えて言っていたことですね

今回のスコープではないですが、少なくとも今回めんどくさかったこと = バッチサーバのPHPバージョンとライブラリの非互換の対応がやりやすくなるはずです

* docker imageを作ってECSで
	* PHPバージョンとライブラリの互換性がないときに腰が重くない
	* 極端だけどバッチごとにバージョン変えられる
	* lambdaも選択肢にはなりえるがECSでいい（制限が少ない）
* 取っ掛かりができれば徐々にそちらに寄せていけるので
	* もちろん布教活動は必要です

## 能力向上に関するアドバイス

* 今回はお題は途中参戦でしたが、今回かいくんがやったようなパートから携わってみるのはどうでしょう
    * 広いドメイン知識は必要になるが、それを調べるのも糧にできる
    * 制約の有無は要件次第だと思うが、考える幅とスコープ、スケジュールなどは自分でコントロール（交渉？）できる
		* 上にあるような改善の対応を行うことを推し進められるかもしれない
	* 機会がない？なみっくに凸りましょう

## メモ

7日前に登録して毎日こつこつポイントため続けてたけど、たまたま7日目だけクソ忙しくてポイント貯めなかったわーというユーザが除外されてしまうのはいいの？なんか7日間連続ログインしたらポイント付与、みたいなのがあるのかな（よくわかってない）

-> なんかそういうもんらしい

googleがどういう風に機械学習すると思う？  

-> それを検討するmtgをgoogleとできていない...

想像で回答してみて

-> 面とか時間帯とかで類似ユーザのターゲティング

アップロードしたgclidを管理はしてない？きっと何度も送っていいから管理していないのだと推測。ログには出してる。

-> 出してる理由はエラーが起きたときの調査のため

自動リカバリできるように  
なんかStepFunctionとかでバッチ実行の戻り値とか見てる？  
2日分送れたとて2日連続で失敗したらリカバリ効かないよね

-> 事業部判断としてその部分については切り捨てる流れになっていた、自動リカバリという言葉が良くなさそう

指定日で送れるようにしているのは良さそう

今後もPHP-libのバージョンの問題が起きるようなら、GoogleAdUploaderはtokenの部分を抽象化して切り出してもよかったかも？まぁでもgoogleのAPIを叩くようなバッチが他に出てくるかというと...

-> 初めてgoogleのAPIを叩くバッチだし、まずはその中に閉じ込める感じにしたとのこと

マネジメントしてもらう？

-> googleがやってくれる話になっていた、担当者の方が退職してしまい、話が前に進んでいない（悲しい）

引数で渡されるtarget_dateのフォーマットチェックはしてなそう？  
まぁDateTimeImmutableで落ちるといえばそう  
とはいえ未来日を指定しても実行できるね（しないけど）

-> エンジニアしか叩かないし、バッチエラーは必ず通知されるので、そこまで厳密にはやっていない（今までのバッチも同様）

過去2日間はgoogle側の推奨だった
