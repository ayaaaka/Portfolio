# 技術力評価会　評価結果

* 被評価者: VM ポイントメディア開発本部 小林彩花（E1）
* 評価者: fluct 有村

[評価資料](./)

## 総評
評価対象は、ECナビの友達紹介とポイント懸賞でのギフト券付与の手動オペレーションを自動化することで、オペレーションコストの削減、誤操作防止、悪意を持った運用者の不正利用防止を狙うものでした。この開発のポイントとしては、digico・godsという似ているが微妙に仕様が異なるサービスをどのようにモデル化するかという点と、外部サービスのAPIとどのように連携するのか、になると思いますが、その二つについて適当な対応がなされていると感じました。

特に良かった点を具体的に挙げると
- ギフト券発行の自動化の開発をリードしてやり切った。また、大きな問題も発生してない
- [外部APIを使うアプリの構築で気をつけるべきこと](https://github.com/voyagegroup/ecnavi/pull/11232#issue-515346393)のような先人の知恵をつかって安全に外部サービスとの連携を実装している
- 外部サービスが落ちていても直接DBを編集するようなオペレーションなしで復帰できるようになっている
- 外部APIのエラー内容もしっかりログに保存している

着実に開発をすすめて価値のあるものをリリースできたのは素晴らしいのですが、気になった部分もあります。スコープの切り方やPRのサイズ（ギフト券を発券する機能のPRはmasterへのマージまで2ヶ月かかっている）は、もう少し工夫する余地があるかと思います。

上記のような改善点がありつつも、総評として価値があるものを開発しきってリリースしたのは素晴らしいと思います。引き続きECナビで着実に成果を上げていくことを期待しています。頑張ってください。

## 評価者が被評価者の状況ならこう考える、こう動く

- 開発からリリースまでのリードタイムが長くなると、別の割り込み作業の発生によりリードタイムがさらに長くなっていきます。なので、私なら全ての機能をまとめてリリース（友達紹介とポイント懸賞、digico・gods連携）する以外の可能性があるが検討します。
  - 例えば、オペレーションコストが高いポイント懸賞だけ先にリリースできないか、等。小さいスコープで価値提供する方法がないか常に模索する。

- 巨大なPRはレビューの負荷を上げ、またビッグバンリリースにつながるので、[このPR](https://github.com/voyagegroup/ecnavi/pull/11232)は少なくとも、digico・godsとの通信部分、認証部分（これは評価対象でも別PRになってた）、デザインに関する部分、その他の部分にわけます。また可能なものは先にmasterにマージして継続的に統合します。
  - 例えば、digico・godsとの通信部分はコマンドラインから実行できる簡単なスクリプトにより動作すること確認してUIよりも先にリリースする。
- 「悪意を持った運用者がギフトコードを利用する可能性」に対応するというのが目的の一つなのであれば、それを監視する何らかの仕組みを作ります。例えば、ギフトコード発行料や傾向を可視化するダッシュボードをつくって定期的に確認する、とか。

- 適切な箇所でDependency Injectionを利用する
  - [ここ](https://github.com/voyagegroup/ecnavi/pull/11232/files#diff-adaf007cbe65896df4ba9730db8705e04b6237b5395c377d436633e2aaa171eeR50)はRequesterFactoryをコンストラクでインジェクトすればcallStaticをコールする必要もないし、テストでpartialMockを利用する必要もなくなる。partialMockは設計が上手くいってない可能性を示唆するサイン。

## 能力向上に関するアドバイス

* 今回の評価対象なら以下の本が参考になるのではと思ったので、もし未読ならオススメです
  * いかに作業のサイズをコントロールするかについては[レガシーコードからの脱却](https://www.oreilly.co.jp/books/9784873118864/) の「6章 プラクティス2 小さなバッチでつくる」
  * Dependency Injectionについては[Clean Architecture](https://tatsu-zine.com/books/clean-architecture)

* 私はチームで輪読会するのが好きなので、おすすめの能力向上のアドバイスは輪読会です。上記の本は両方ともチームの輪読会で読んだのですが、個人への知識の定着という意味でも、チームで何をよしとするかの目線合わせという意味でもよかったです（PRレビューで「Clean ArchitectureでHogeと書いてあったしこうしてみよう」のような会話のきっかけになる）。
